<!DOCTYPE html> <html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us"> <head> <script async src="https://www.googletagmanager.com/gtag/js?id=G-3N6CESJ0B5"></script> <script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-3N6CESJ0B5");</script> <link href="http://gmpg.org/xfn/11" rel="profile"> <meta http-equiv="content-type" content="text/html; charset=utf-8"> <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"> <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"> <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"> <link rel="manifest" href="/site.webmanifest"> <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"> <title> Using Defined Properties for Better AngularJS Directives &middot; effluence </title> <link rel="stylesheet" href="/assets/css/styles.css"> <link rel="preconnect" href="https://fonts.gstatic.com"> <link href="https://fonts.googleapis.com/css2?family=Epilogue&display=swap" rel="stylesheet"> <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml"> <link rel="canonical" href="https://sonnym.com/2015/01/21/using-defined-properties-for-better-angularjs-directives/"> </head> <body class="layout-reverse"> <div class="sidebar"> <div class="container sidebar-sticky"> <div class="sidebar-about"> <h1>effluence</h1> <p class="lead"></p> </div> <ul class="sidebar-nav"> <li class="sidebar-nav-item"> <a href="/">home</a> </li> <li class="sidebar-nav-item"> <a href="/about/">about</a> </li> <li class="sidebar-nav-item"> <a href="/atom.xml" target="_blank">rss</a> </li> </ul> <p>&copy; 2026. All rights reserved.</p> </div> </div> <div class="content container"> <div class="post"> <h1 class="post-title">Using Defined Properties for Better AngularJS Directives</h1> <h2 id="on-directives">On Directives</h2> <p>Directives in AngularJS are an exemplary solution for writing reusable components in modern web applications. They allow us to encapsulate all the messy business logic and expose a very clean, declarative interface to consumers of the API. As with most tools for constructing abstractions, however, directives have certain limitations that can lead to implementation details leaking through, resulting in code that less <span class="fancylink"> <a href="https://en.wikipedia.org/wiki/DRY_principle">DRY</a> <span> <a href="https://en.wikipedia.org/wiki/DRY_principle" target="_blank" alt="Pop Out" title="Pop Out"><svg class="octicon octicon-link-external" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M3.75 2h3.5a.75.75 0 0 1 0 1.5h-3.5a.25.25 0 0 0-.25.25v8.5c0 .138.112.25.25.25h8.5a.25.25 0 0 0 .25-.25v-3.5a.75.75 0 0 1 1.5 0v3.5A1.75 1.75 0 0 1 12.25 14h-8.5A1.75 1.75 0 0 1 2 12.25v-8.5C2 2.784 2.784 2 3.75 2Zm6.854-1h4.146a.25.25 0 0 1 .25.25v4.146a.25.25 0 0 1-.427.177L13.03 4.03 9.28 7.78a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042l3.75-3.75-1.543-1.543A.25.25 0 0 1 10.604 1Z"></path></svg></a> </span> </span> and, consequently, less maintainable.</p> <p>There are, however, ways to work around these shortcomings and to build simpler, more expressive interfaces to our directives. Leveraging a lesser known feature of JavaScript, we can encapsulate additional details of our business logic. This method is also well suited for building on top of third party directives with a complex API by abstracting the details into a business object. In doing so, our markup will become more in line with the ideal in AngularJS, which <span class="fancylink"> <a href="https://docs.angularjs.org/guide/introduction">promotes declarative code</a> <span> <a href="https://docs.angularjs.org/guide/introduction" target="_blank" alt="Pop Out" title="Pop Out"><svg class="octicon octicon-link-external" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M3.75 2h3.5a.75.75 0 0 1 0 1.5h-3.5a.25.25 0 0 0-.25.25v8.5c0 .138.112.25.25.25h8.5a.25.25 0 0 0 .25-.25v-3.5a.75.75 0 0 1 1.5 0v3.5A1.75 1.75 0 0 1 12.25 14h-8.5A1.75 1.75 0 0 1 2 12.25v-8.5C2 2.784 2.784 2 3.75 2Zm6.854-1h4.146a.25.25 0 0 1 .25.25v4.146a.25.25 0 0 1-.427.177L13.03 4.03 9.28 7.78a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042l3.75-3.75-1.543-1.543A.25.25 0 0 1 10.604 1Z"></path></svg></a> </span> </span> over imperative. Without further ado, let us look at the current situation and how we can improve our directives.</p> <h2 id="motivation-and-shortcomings">Motivation and Shortcomings</h2> <p>The original motivation for this method arose when working with <span class="fancylink"> <a href="https://angular-ui.github.io/bootstrap/#/tabs">tabs component</a> <span> <a href="https://angular-ui.github.io/bootstrap/#/tabs" target="_blank" alt="Pop Out" title="Pop Out"><svg class="octicon octicon-link-external" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M3.75 2h3.5a.75.75 0 0 1 0 1.5h-3.5a.25.25 0 0 0-.25.25v8.5c0 .138.112.25.25.25h8.5a.25.25 0 0 0 .25-.25v-3.5a.75.75 0 0 1 1.5 0v3.5A1.75 1.75 0 0 1 12.25 14h-8.5A1.75 1.75 0 0 1 2 12.25v-8.5C2 2.784 2.784 2 3.75 2Zm6.854-1h4.146a.25.25 0 0 1 .25.25v4.146a.25.25 0 0 1-.427.177L13.03 4.03 9.28 7.78a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042l3.75-3.75-1.543-1.543A.25.25 0 0 1 10.604 1Z"></path></svg></a> </span> </span> of AngularUI Bootstrap. Its <code class="language-plaintext highlighter-rouge">&lt;tabset&gt;</code> directive provides three settings with clearly overlapping concerns: <code class="language-plaintext highlighter-rouge">active</code>, <code class="language-plaintext highlighter-rouge">select()</code>, and <code class="language-plaintext highlighter-rouge">deselect()</code>. This redundancy forces users of the API to not only create functions in addition to the <code class="language-plaintext highlighter-rouge">active</code> flag, but more importantly, to declare them in the markup. We repeat this for all tabs in a given application, leading to additional maintenance effort.</p> <p>This example also exhibits a significant issue with directives and two-way binding in AngularJS. If we want the active flag to be programmatically determined, e.g. if we have push notifications from the server to affect the active state of our tabs, we are required to use a <code class="language-plaintext highlighter-rouge">$watch</code> in our controller to set the attribute on our object — something like the following:</p> <figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">angular</span><span class="p">.</span><span class="nf">controller</span><span class="p">(</span><span class="dl">"</span><span class="s2">TabsController</span><span class="dl">"</span><span class="p">,</span> <span class="p">[</span><span class="dl">"</span><span class="s2">$scope</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">TabModel</span><span class="dl">"</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">$scope</span><span class="p">,</span> <span class="nx">TabModel</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">$scope</span><span class="p">.</span><span class="nf">$watch</span><span class="p">(</span><span class="nx">TabModel</span><span class="p">.</span><span class="nx">activeFn</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">val</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">$scope</span><span class="p">.</span><span class="nx">isTabActive</span> <span class="o">=</span> <span class="nx">val</span><span class="p">;</span>
  <span class="p">});</span>
<span class="p">}]);</span></code></pre></figure> <p>This boilerplate quickly accumulates, making our controllers fatter than they optimally should be. We could move this logic into our service layer, but that only deflects, not fundamentally solves, the issue. One may surmise that, perhaps, instead we could supply a function, but the <span class="fancylink"> <a href="https://code.angularjs.org/1.3.10/docs/api/ng/service/$compile#-scope-">two-way binding</a> <span> <a href="https://code.angularjs.org/1.3.10/docs/api/ng/service/$compile#-scope-" target="_blank" alt="Pop Out" title="Pop Out"><svg class="octicon octicon-link-external" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M3.75 2h3.5a.75.75 0 0 1 0 1.5h-3.5a.25.25 0 0 0-.25.25v8.5c0 .138.112.25.25.25h8.5a.25.25 0 0 0 .25-.25v-3.5a.75.75 0 0 1 1.5 0v3.5A1.75 1.75 0 0 1 12.25 14h-8.5A1.75 1.75 0 0 1 2 12.25v-8.5C2 2.784 2.784 2 3.75 2Zm6.854-1h4.146a.25.25 0 0 1 .25.25v4.146a.25.25 0 0 1-.427.177L13.03 4.03 9.28 7.78a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042l3.75-3.75-1.543-1.543A.25.25 0 0 1 10.604 1Z"></path></svg></a> </span> </span> mechanism for directives requires that the property we specify be assignable. As such, we cannot use our function as is to pass the value through the’ interface of the directive.</p> <h2 id="a-solution">A Solution</h2> <p>There is, however, a very simple way to circumvent both these issues with one fairly small change. Introduce the <span class="fancylink"> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/defineProperty">Object.defineProperty</a> <span> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/defineProperty" target="_blank" alt="Pop Out" title="Pop Out"><svg class="octicon octicon-link-external" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M3.75 2h3.5a.75.75 0 0 1 0 1.5h-3.5a.25.25 0 0 0-.25.25v8.5c0 .138.112.25.25.25h8.5a.25.25 0 0 0 .25-.25v-3.5a.75.75 0 0 1 1.5 0v3.5A1.75 1.75 0 0 1 12.25 14h-8.5A1.75 1.75 0 0 1 2 12.25v-8.5C2 2.784 2.784 2 3.75 2Zm6.854-1h4.146a.25.25 0 0 1 .25.25v4.146a.25.25 0 0 1-.427.177L13.03 4.03 9.28 7.78a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042l3.75-3.75-1.543-1.543A.25.25 0 0 1 10.604 1Z"></path></svg></a> </span> </span> method, part of the ECMAScript-262 standard. This extremely powerful method gives us the ability to define custom properties on an object and control aspects of it otherwise not available, such as its enumerability and whether or not it can be written. For our purposes, the most important functionality is the ability to define custom setter and getter methods for our property in a manner that is completely transparent to users of the object.</p> <p>We write a wrapper function for instances of our tab models, which need not be the same type of service. This wrapper defines an <code class="language-plaintext highlighter-rouge">active</code> property to handle both activating and deactivating the tab. We can also extend the default wrapper to do additional work for us. In this case, we add a <code class="language-plaintext highlighter-rouge">notify</code> method to the <code class="language-plaintext highlighter-rouge">TabWrapper</code> class which prevents notifications from being displayed on the currently active tab, but could also be used to perform other operations, such as automatically triggering updates in the model.</p> <figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">app</span><span class="p">.</span><span class="nf">service</span><span class="p">(</span><span class="dl">"</span><span class="s2">TabWrapper</span><span class="dl">"</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">function</span> <span class="nf">TabWrapper</span><span class="p">(</span><span class="nx">tabModel</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">model</span> <span class="o">=</span> <span class="nx">tabModel</span><span class="p">;</span>

    <span class="nb">Object</span><span class="p">.</span><span class="nf">defineProperty</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="dl">"</span><span class="s2">active</span><span class="dl">"</span><span class="p">,</span> <span class="p">{</span>
      <span class="na">get</span><span class="p">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">tabModel</span><span class="p">.</span><span class="nx">active</span><span class="p">;</span>
      <span class="p">},</span>

      <span class="na">set</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">val</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if </span><span class="p">(</span><span class="nx">val</span> <span class="o">&amp;&amp;</span> <span class="nx">tabModel</span><span class="p">.</span><span class="nx">activate</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">tabModel</span><span class="p">.</span><span class="nf">activate</span><span class="p">();</span>
        <span class="p">}</span> <span class="k">else</span> <span class="k">if </span><span class="p">(</span><span class="o">!</span><span class="nx">val</span> <span class="o">&amp;&amp;</span> <span class="nx">tabModel</span><span class="p">.</span><span class="nx">deactivate</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">tabModel</span><span class="p">.</span><span class="nf">deactivate</span><span class="p">();</span>
        <span class="p">}</span>

        <span class="nx">tabModel</span><span class="p">.</span><span class="nx">active</span> <span class="o">=</span> <span class="nx">val</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">});</span>
  <span class="p">}</span>

  <span class="nx">TabWrapper</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">notify</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">model</span><span class="p">.</span><span class="nx">active</span> <span class="o">&amp;&amp;</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">model</span><span class="p">.</span><span class="nx">notify</span> <span class="o">&amp;&amp;</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">model</span><span class="p">.</span><span class="nf">notify</span><span class="p">();</span>
  <span class="p">};</span>

  <span class="k">return</span> <span class="nx">TabWrapper</span><span class="p">;</span>
<span class="p">});</span></code></pre></figure> <p>In short, what we have accomplished is hiding all the details of how our tabs operate in our service layer without any of it leaking into our controllers or templates. So long as our services follow the simple interface defined by <code class="language-plaintext highlighter-rouge">TabWrapper</code>, they will function seamlessly.</p> <p>N.B. Using a wrapper class is a somewhat naive way of accomplishing this technique, but it works well enough for these purposes. For a comprehensive treatment on the subject of object composition and extension in JavaScript, I cannot recommend highly enough Reginald Braithwaite’s treatise on the topic: <span class="fancylink"> <a href="https://leanpub.com/javascript-spessore/read">JavaScript Spessore</a> <span> <a href="https://leanpub.com/javascript-spessore/read" target="_blank" alt="Pop Out" title="Pop Out"><svg class="octicon octicon-link-external" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M3.75 2h3.5a.75.75 0 0 1 0 1.5h-3.5a.25.25 0 0 0-.25.25v8.5c0 .138.112.25.25.25h8.5a.25.25 0 0 0 .25-.25v-3.5a.75.75 0 0 1 1.5 0v3.5A1.75 1.75 0 0 1 12.25 14h-8.5A1.75 1.75 0 0 1 2 12.25v-8.5C2 2.784 2.784 2 3.75 2Zm6.854-1h4.146a.25.25 0 0 1 .25.25v4.146a.25.25 0 0 1-.427.177L13.03 4.03 9.28 7.78a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042l3.75-3.75-1.543-1.543A.25.25 0 0 1 10.604 1Z"></path></svg></a> </span> </span>.</p> <h2 id="an-example">An Example</h2> <p><span class="fancylink"> <a href="http://plnkr.co/edit/7X66uV?p=preview">Open in Plunkr</a> <span> <a href="http://plnkr.co/edit/7X66uV?p=preview" target="_blank" alt="Pop Out" title="Pop Out"><svg class="octicon octicon-link-external" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="M3.75 2h3.5a.75.75 0 0 1 0 1.5h-3.5a.25.25 0 0 0-.25.25v8.5c0 .138.112.25.25.25h8.5a.25.25 0 0 0 .25-.25v-3.5a.75.75 0 0 1 1.5 0v3.5A1.75 1.75 0 0 1 12.25 14h-8.5A1.75 1.75 0 0 1 2 12.25v-8.5C2 2.784 2.784 2 3.75 2Zm6.854-1h4.146a.25.25 0 0 1 .25.25v4.146a.25.25 0 0 1-.427.177L13.03 4.03 9.28 7.78a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042l3.75-3.75-1.543-1.543A.25.25 0 0 1 10.604 1Z"></path></svg></a> </span> </span></p> <p>Using the above service, we can construct a complete example of how this process works. This example underscores all of the advantages discussed above.</p> <figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">app</span> <span class="o">=</span> <span class="nx">angular</span><span class="p">.</span><span class="nf">module</span><span class="p">(</span><span class="dl">"</span><span class="s2">DefinedPropertyExample</span><span class="dl">"</span><span class="p">,</span> <span class="p">[</span><span class="dl">"</span><span class="s2">ui.bootstrap</span><span class="dl">"</span><span class="p">]);</span>

<span class="nx">app</span><span class="p">.</span><span class="nf">service</span><span class="p">(</span><span class="dl">"</span><span class="s2">TabModel</span><span class="dl">"</span><span class="p">,</span> <span class="p">[</span><span class="dl">"</span><span class="s2">$timeout</span><span class="dl">"</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">$timeout</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">function</span> <span class="nf">TabModel</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">active</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">notification</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="nx">TabModel</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">activate</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">content</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">Some lazy content</span><span class="dl">"</span><span class="p">;</span>
  <span class="p">};</span>

  <span class="nx">TabModel</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">deactivate</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">notification</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nb">self</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
    <span class="nf">$timeout</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="nb">self</span><span class="p">.</span><span class="nx">notification</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
    <span class="p">},</span> <span class="nb">Math</span><span class="p">.</span><span class="nf">floor</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nf">random</span><span class="p">()</span> <span class="o">*</span> <span class="mi">5000</span><span class="p">));</span>
  <span class="p">};</span>

  <span class="nx">TabModel</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">notify</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">notification</span><span class="p">;</span>
  <span class="p">};</span>

  <span class="k">return</span> <span class="nx">TabModel</span><span class="p">;</span>
<span class="p">}]);</span>

<span class="nx">app</span><span class="p">.</span><span class="nf">controller</span><span class="p">(</span><span class="dl">"</span><span class="s2">TabsCtrl</span><span class="dl">"</span><span class="p">,</span> <span class="p">[</span><span class="dl">"</span><span class="s2">$scope</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">TabModel</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">TabWrapper</span><span class="dl">"</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">$scope</span><span class="p">,</span> <span class="nx">TabModel</span><span class="p">,</span> <span class="nx">TabWrapper</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">$scope</span><span class="p">.</span><span class="nx">tabs</span> <span class="o">=</span> <span class="p">[];</span>

  <span class="k">for </span><span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="mi">5</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">$scope</span><span class="p">.</span><span class="nx">tabs</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">TabWrapper</span><span class="p">(</span><span class="k">new</span> <span class="nc">TabModel</span><span class="p">());</span>
  <span class="p">}</span>
<span class="p">}]);</span></code></pre></figure> <figure class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;body</span> <span class="na">ng-app=</span><span class="s">"DefinedPropertyExample"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;div</span> <span class="na">ng-controller=</span><span class="s">"TabsCtrl"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;tabset&gt;</span>
      <span class="nt">&lt;tab</span> <span class="na">ng-repeat=</span><span class="s">"tab in tabs track by $index"</span> <span class="na">active=</span><span class="s">"tab.active"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;tab-heading&gt;</span>
          Tab { { $index + 1 } }
          <span class="nt">&lt;span</span> <span class="na">ng-if=</span><span class="s">"tab.notify()"</span><span class="nt">&gt;</span>!<span class="nt">&lt;/span&gt;</span>
        <span class="nt">&lt;/tab-heading&gt;</span>

        { { tab.model.content } }
      <span class="nt">&lt;/tab&gt;</span>
    <span class="nt">&lt;/tabset&gt;</span>
  <span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/body&gt;</span></code></pre></figure> <p>First, we create a service object to drive our tabs. This model conforms to the interface we have specified, namely the <code class="language-plaintext highlighter-rouge">activate</code>, <code class="language-plaintext highlighter-rouge">deactivate</code>, and <code class="language-plaintext highlighter-rouge">notify</code> methods, although our wrapper allows any or all of these to be omitted. The <code class="language-plaintext highlighter-rouge">activate</code> method defines the content for our tab lazily, as though it were being loaded from a server. The <code class="language-plaintext highlighter-rouge">deactivate</code> method resets any active notification and creates a <code class="language-plaintext highlighter-rouge">$timeout</code> that will activate the notification within five seconds, as though notifications were streaming from a server. And, finally, the <code class="language-plaintext highlighter-rouge">notify</code> method simply returns the <code class="language-plaintext highlighter-rouge">notification</code> property, but is written as a function so that it would be possible to easily extend it to accumulate data from subordinate objects if ever necessary.</p> <p>Our controller simply creates five of these tabs and wraps them. Our template iterates over and displays them. We can see the first activate function operate immediately, given the content being displayed in the first tab. After changing tabs, we see an exclamation point appear next to any tabs with notifications, which is then reset when reactivated (recall, this latter point is handled by the wrapper).</p> <h2 id="conclusion">Conclusion</h2> <p>The markup is cleaner, the controller knows nothing about the tabs, and all our business logic exists in more or less pure JavaScript objects. All these points are massive gains for maintainability, but the latter merits some emphasis. Pushing as much of our logic down into simple, decoupled objects facilitates writing tests — a practice that can use as much facilitation as possible. Ultimately, any time we can find abstractions of this nature, they will benefit the long term viability of our AngularJS applications.</p> <span class="post-date">21 Jan 2015</span> </div> <div class="related"> <h2>Related Posts</h2> <ul class="related-posts"> <li> <h3> <a href="/2017/06/18/on-maintainability-gold-plating-the-game-of-life-in-elm/"> On Maintainability: Gold Plating the Game of Life in Elm <small>18 Jun 2017</small> </a> </h3> </li> <li> <h3> <a href="/2018/01/03/privacy-and-exposure-gatekeeprs-and-privileged-consumers/"> Privacy and Exposure, Gatekeepers and Privileged Consumers <small>03 Jan 2018</small> </a> </h3> </li> <li> <h3> <a href="/2017/06/05/common-table-expressions-in-activerecord-a-case-study-of-quantiles/"> Common Table Expressions in ActiveRecord: A Case Study of Quantiles <small>05 Jun 2017</small> </a> </h3> </li> </ul> </div> <p class="bitcoin"></p> </div> </body> </html>